{"ast":null,"code":"import axios from \"axios\";\nimport * as actions from \"./authActions\";\nimport * as selectors from './authSelectors';\nconst token = {\n  set(value) {\n    axios.defaults.headers.common.Authorization = `Bearer ${value}`;\n  },\n\n  unset() {\n    axios.defaults.headers.common.Authorization = null;\n  }\n\n};\nexport const login = userData => dispatch => {\n  dispatch(actions.loginRequest());\n  axios.post(\"/users/login\", userData).then(res => {\n    token.set(res.data.token);\n    dispatch(actions.loginSuccess(res.data));\n  }).catch(error => {\n    dispatch(actions.loginError(error));\n  });\n};\nexport const register = userData => dispatch => {\n  dispatch(actions.registerRequest());\n  axios.post(\"/users/signup\", userData).then(res => {\n    token.set(res.data.token);\n    dispatch(actions.registerSuccess(res.data));\n  }).catch(error => {\n    dispatch(actions.registerError(error));\n  });\n};\nexport const logout = userData => dispatch => {\n  dispatch(actions.logoutRequest());\n  axios.post(\"/users/logout\").then(() => {\n    token.unset();\n    dispatch(actions.logoutSuccess());\n  }).catch(error => {\n    dispatch(actions.logoutError(error));\n  });\n};\nexport const fetchUserData = () => (dispatch, getState) => {\n  const stateToken = selectors.getToken(getState());\n  dispatch(actions.fetchUserDataRequest());\n  axios.get(\"/users/current\").then(res => {\n    dispatch(actions.fetchUserDataSuccess(res.data));\n  }).catch(error => {\n    dispatch(actions.fetchUserDatanError(error));\n  });\n};","map":{"version":3,"sources":["C:/Users/Misha/Desktop/Code/React/goiteens-react-2020/src/redux/auth/authOperations.js"],"names":["axios","actions","selectors","token","set","value","defaults","headers","common","Authorization","unset","login","userData","dispatch","loginRequest","post","then","res","data","loginSuccess","catch","error","loginError","register","registerRequest","registerSuccess","registerError","logout","logoutRequest","logoutSuccess","logoutError","fetchUserData","getState","stateToken","getToken","fetchUserDataRequest","get","fetchUserDataSuccess","fetchUserDatanError"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport * as actions from \"./authActions\";\r\nimport * as selectors from './authSelectors'\r\nconst token = {\r\n  set(value) {\r\n    axios.defaults.headers.common.Authorization = `Bearer ${value}`;\r\n  },\r\n  unset() {\r\n    axios.defaults.headers.common.Authorization = null;\r\n  },\r\n};\r\n\r\nexport const login = (userData) => (dispatch) => {\r\n  dispatch(actions.loginRequest());\r\n  axios\r\n    .post(\"/users/login\", userData)\r\n    .then((res) => {\r\n      token.set(res.data.token);\r\n      dispatch(actions.loginSuccess(res.data));\r\n    })\r\n    .catch((error) => {\r\n      dispatch(actions.loginError(error));\r\n    });\r\n};\r\n\r\nexport const register = (userData) => (dispatch) => {\r\n  dispatch(actions.registerRequest());\r\n  axios\r\n    .post(\"/users/signup\", userData)\r\n    .then((res) => {\r\n      token.set(res.data.token);\r\n      dispatch(actions.registerSuccess(res.data));\r\n    })\r\n    .catch((error) => {\r\n      dispatch(actions.registerError(error));\r\n    });\r\n};\r\n\r\nexport const logout = (userData) => (dispatch) => {\r\n  dispatch(actions.logoutRequest());\r\n  axios\r\n    .post(\"/users/logout\")\r\n    .then(() => {\r\n      token.unset();\r\n      dispatch(actions.logoutSuccess());\r\n    })\r\n    .catch((error) => {\r\n      dispatch(actions.logoutError(error));\r\n    });\r\n};\r\n\r\nexport const fetchUserData = () => (dispatch, getState) => {\r\n  const stateToken = selectors.getToken(getState())\r\n  dispatch(actions.fetchUserDataRequest());\r\n  axios\r\n    .get(\"/users/current\")\r\n    .then((res) => {\r\n \r\n      dispatch(actions.fetchUserDataSuccess(res.data));\r\n    })\r\n    .catch((error) => {\r\n      dispatch(actions.fetchUserDatanError(error));\r\n    });\r\n};\r\n"]},"metadata":{},"sourceType":"module"}